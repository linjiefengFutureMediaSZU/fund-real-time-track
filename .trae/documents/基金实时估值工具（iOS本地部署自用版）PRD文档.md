# 基金实时估值工具（iOS本地部署自用版）PRD文档

# 一、文档基础信息

|项目名称|iOS本地部署基金实时估值工具（自用版）|
|---|---|
|文档版本|V1.0|
|产品目标|聚焦自选基金实时估值核心诉求，构建iOS本地部署的轻量化估值工具，支持自选基金添加、实时估值查询及基础盈亏核算功能，适配个人自用场景，兼顾本地数据安全与移动端便捷运维特性。|
|核心参考|参考小倍养基、养基宝的实时估值核心功能模块，精简冗余业务组件，适配iOS本地部署及个人自用场景需求。|
|适用平台|iOS移动端本地部署（兼容iOS 13及以上版本）|
|目标用户|iOS终端用户，用于个人场景下查询自选基金实时估值，具备本地数据存储需求、规避线上数据泄露风险的核心诉求。|
|文档作者|林杰锋|
|创建时间|2026年2月2日|
|更新时间|2026年2月2日|
|研发负责人|林杰锋|
|测试负责人|待指定|
# 二、产品核心定位与竞品参考

## 2.1 产品核心定位

聚焦自选基金实时估值查询核心场景，不涉及复杂数据分析、交易及线上部署相关功能，秉持“iOS本地安全、精准高效、轻量化运维”的核心定位，满足iOS用户个人自用场景下的自选基金管理、实时估值查询及基础涨跌信息展示需求，兼顾本地数据存储安全性与移动端基础操作体验。

## 2.2 竞品核心功能参考

### 2.2.1 核心参考亮点

借鉴小倍养基的多算法估值精准性及养基宝的高频刷新优势，保留核心估值能力，剔除冗余工具及复杂分析模块，聚焦iOS端自选基金管理与估值查询核心场景，适配移动端单手操作交互规范。

### 2.2.2 功能取舍原则

保留核心功能：自选基金管理、实时估值查询、基础涨跌展示、本地数据存储；优化核心体验：精简操作流程，适配iOS端交互规范及本地部署要求，提升本地数据读取与估值加载效率；剔除非核心功能：线上账户体系、跨系统数据同步、社区互动、AI分析等非核心及线上关联模块。

### 2.2.3 竞品劣势规避

规避小倍养基“冗余功能占用内存过高”的问题，严控工具安装包体积（目标≤50MB），杜绝不必要的资源消耗；规避养基宝“部分场景数据延迟过高”的问题，优化行情数据抓取与估值计算逻辑，确保交易时段刷新延迟≤1秒；规避同类工具“本地数据备份繁琐”的问题，简化备份/恢复操作，支持一键导出/导入加密文件，适配iOS本地存储场景。

# 三、需求分析

需求分析以iOS本地自用场景为核心，拆解用户核心诉求、界定业务边界，规避非必要功能开发，确保需求与iOS本地部署、数据安全的核心定位一致，为后续产品设计与研发工作提供明确依据。

## 3.1 用户需求分析

- 核心诉求：无需线上登录，实现iOS本地自选基金数据存储，规避数据泄露风险；快速查询基金实时估值、涨跌幅及盈亏情况，获取精准且高频更新的估值数据，适配移动端单手操作，保障操作便捷性。

- 潜在诉求：支持自选基金分类管理，可自定义估值刷新频率及提醒规则；实现iOS本地数据备份与恢复；界面设计简洁，适配iOS明暗模式，满足长时间查看需求。

- 排斥点：拒绝冗余功能（如社区互动、AI分析），避免终端运行卡顿；禁止数据线上上传，重视个人持仓成本等隐私数据安全；拒绝复杂操作流程，需以极简流程完成核心操作，适配移动端使用场景。

## 3.2 业务需求分析

- 数据层面：对接合规数据源，保障基金基础数据、实时行情数据及估值数据的准确性，支持iOS本地数据同步与校验；估值算法偏差控制在≤0.5%，适配不同类型基金（含QDII）的估值逻辑。

- 功能层面：覆盖自选管理、估值查询、盈亏测算、提醒设置、iOS本地数据管理核心业务，不涉及交易、投资咨询等违规业务，适配iOS通知机制规范。

- 合规层面：严格遵循《个人信息保护法》及iOS隐私规范，所有数据仅存储于本地，不收集、不上传用户任何数据；界面标注免责提示，明确估值仅作为参考依据，规避使用风险。

## 3.3 技术需求分析

- 部署适配：兼容iOS 13及以上版本，适配主流iOS终端（iPhone、iPad），支持单机运行，无需搭建服务器，符合iOS系统权限管理规范。

- 性能需求：冷启动时间≤3秒、热启动时间≤1秒，估值刷新延迟≤1秒，连续运行24小时无崩溃，适配高频刷新场景，严控终端内存占用。

- 安全需求：支持iOS本地数据加密，密码加密存储；实现数据库防篡改、防泄露，备份文件可校验完整性，适配iOS钥匙串加密机制。

- 兼容性需求：适配iOS主流终端分辨率与系统字体，支持iOS明暗模式自动切换，贴合iOS原生交互逻辑。

- 运维需求：支持本地版本更新（无需线上服务器，通过安装包覆盖更新），更新时保留用户自选数据与配置信息；支持异常日志本地导出，便于问题排查与版本优化。

## 3.4 需求优先级梳理

按“核心必做-优化提升-可选拓展”三级划分，聚焦核心需求，贴合iOS本地自用轻量化定位，合理分配研发资源：

- P0（必做）：自选管理、实时估值查询、iOS本地数据存储与备份、基础盈亏展示、合规提示，适配iOS原生交互规范。

- P1（优化）：iOS本地数据加密、估值算法精度优化、自定义提醒（适配iOS通知机制）、iPad横屏显示适配。

- P2（可选）：重仓股明细深度展示、估值历史数据查询、iOS快捷指令适配。

# 四、总体设计

总体设计围绕“iOS本地轻量化、安全可控、便捷易用”核心目标，搭建产品整体架构，界定各模块边界与iOS端交互逻辑，衔接需求分析与详细设计环节，确保系统可落地、可迭代，贴合iOS原生使用体验。

## 4.1 架构设计（分层架构，适配iOS本地部署）

### 4.1.1 整体分层

- 界面层（UI层）：基于SwiftUI研发，负责iOS端用户交互与界面展示，涵盖首页、基金详情页、设置页等全部页面，适配iOS明暗模式与单手操作需求。

- 业务逻辑层：核心处理自选基金管理、估值计算、提醒触发、数据同步、加密解密等业务流程，衔接界面层与数据层，落地业务规则，适配iOS系统运行机制。

- 数据访问层：负责iOS本地数据库的读写、备份与恢复，完成数据源的数据抓取与同步，提供数据校验机制，保障数据准确性，符合iOS数据权限规范。

- 数据存储层：采用iOS原生轻量级数据存储方案（Core Data），存储基金数据、用户配置、自选列表等信息，适配iOS本地存储安全规范。

### 4.1.2 模块划分

- 自选基金管理模块：负责基金搜索、添加、分组、排序、删除、置顶等操作，同步更新iOS本地Core Data数据库，适配移动端滑动、长按等交互操作。

- 估值核心模块：对接合规数据源，执行估值算法，处理实时行情数据，计算估值涨跌幅与盈亏情况，管控刷新频率，符合iOS网络请求规范。

- 提醒模块：监听估值涨跌阈值、净值更新事件，触发iOS本地通知，负责提醒规则的新增、修改与删除，适配iOS通知权限与展示规范。

- 本地数据管理模块：负责Core Data数据库备份、恢复、清理及数据加密解密，适配iOS钥匙串加密机制，支持iCloud本地备份（仅本地同步，不上传第三方服务器）。

- 系统设置模块：管理iOS端界面主题（适配系统明暗模式）、字体大小、刷新频率、版本更新等配置，将用户偏好存储于本地，贴合iOS设置界面逻辑。

- 日志与异常处理模块：负责系统运行日志、异常日志的本地记录与导出，处理APP崩溃、数据同步失败、数据库损坏等异常场景，执行自动修复或提示用户干预，适配iOS日志存储规范。

## 4.2 技术选型

### 4.2.1 开发语言与框架

- iOS端：采用Swift+SwiftUI开发，原生适配iOS系统，提升运行性能与交互流畅度，兼容iOS 13及以上版本，兼顾研发效率与iOS原生设计规范。

### 4.2.2 数据库选型

- iOS端：采用Core Data框架，为苹果原生数据存储方案，适配iOS系统，支持本地加密，与SwiftUI联动性强，提升数据读写性能，满足iOS本地存储安全要求。

### 4.2.3 辅助技术

- 数据加密：采用AES算法对数据库文件进行加密，结合iOS钥匙串存储访问密码，规避本地数据泄露风险，符合iOS隐私安全规范。

- 数据抓取：通过URLSession发起网络请求，抓取合规数据源数据，设置重试机制与网络异常处理流程，适配iOS网络权限与后台请求规范。

- 图表展示：采用Charts框架，绘制估值分时图、日K图，轻量化适配iOS端渲染需求，支持手势缩放，贴合移动端操作习惯。

- 日志处理：采用CocoaLumberjack框架，实现日志分级记录（调试日志、信息日志、错误日志），支持按时间筛选导出，适配iOS本地日志管理需求。

- 加密辅助：结合Keychain Services框架，安全存储加密密码与敏感配置，避免明文存储，贴合iOS原生安全机制。

## 4.3 交互总体设计

- 操作逻辑：核心操作步骤控制在≤2步，如自选添加、提醒设置等，精简用户操作流程；贴合iOS原生交互规范（滑动删除、长按弹窗、下拉刷新），降低用户学习成本，适配单手操作场景。

- 跳转规则：明确页面层级架构，实现首页→基金详情页、首页→设置页、设置页→各细分设置页的合理跳转，支持iOS原生返回手势与导航栏返回按钮，杜绝冗余跳转路径。

- 反馈设计：针对操作成功/失败、数据同步、提醒触发等场景，采用iOS原生Toast提示或弹窗反馈，确保用户操作感知清晰；数据刷新时展示iOS原生加载动画，提升用户体验。

- 异常交互：APP崩溃重启后，弹出异常提示并提供“查看日志”“反馈问题”入口；数据同步失败/数据库损坏时，引导用户手动刷新或导入备份数据，避免用户无措。

## 4.4 迭代规划总体设计

- V1.0版本（1个月）：完成核心模块研发与iOS端适配，落地P0级需求，兼容iOS 13及以上主流终端，保障本地运行稳定性与数据安全性。

- V1.1版本（2周）：迭代P1级优化需求，新增数据加密、iPad横屏适配功能，优化运行性能与界面体验，修复已知问题，适配最新iOS版本。

- V2.0版本（可选，1.5个月）：拓展P2级需求，新增iOS快捷指令适配、估值历史数据查询功能，优化多终端适配效果，提升估值算法精度。

- 迭代保障：每个版本上线前完成全量测试，上线后保留1周问题监控期；用户反馈的核心问题（如崩溃、数据丢失）优先纳入下一轮迭代，确保工具可用性。

# 五、核心功能需求（优先级：P0必做，P1优化）

## 5.1 自选基金管理（P0）

- 基金添加：支持通过基金代码、名称进行搜索添加，搜索结果优先匹配精确代码及历史查询记录，支持批量添加自选基金，适配iOS键盘输入与搜索交互规范。

- 自选管理：支持自选基金排序、滑动删除、分组重命名，可创建多个自定义分组（如“稳健型”“指数型”），满足用户分类管理需求；支持长按弹窗完成置顶、持仓成本修改等操作。

- 本地数据留存：自动将用户自选列表存储至iOS本地Core Data，无需登录即可使用，支持本地备份（导出文件）与恢复（导入文件），避免数据丢失；支持自选基金收藏置顶，便于快速查看重点基金。

## 5.2 实时估值核心模块（P0）

- 计算逻辑：基于基金最新季报披露的重仓股及仓位比例，结合底层资产实时价格波动进行测算，QDII基金额外叠加外汇结算影响，保障估值参考价值。

- 精度与刷新：默认估值算法与最终净值偏差≤0.5%；交易时段（9:30-11:30，13:00-15:00）每15秒自动刷新一次，支持下拉手动刷新；非交易时段展示最新估值及昨日净值，QDII基金适配对应市场交易时间完成刷新，符合iOS后台刷新规范。

- 核心展示：自选列表展示单基金实时估值、估值涨跌幅、昨日净值；基金详情页补充估值走势图（分时/日K）、估值更新时间、估值偏差提示，支持估值与同类均值简易对比，走势图支持双指缩放。

- 本地合规提示：界面标注免责提示（明确实时估值≠实际净值，实际净值以基金公司收盘后公布为准），仅限个人参考使用，规避使用风险，贴合iOS界面布局规范。

## 5.3 基础盈亏与净值提醒（P0）

- 盈亏展示：基于用户手动录入的自选基金持仓成本，结合实时估值，展示单基金及自选组合的实时预估盈亏、持仓收益率（简易测算），适配iOS端数据展示排版规范。

- 净值提醒：支持开启自选基金净值更新提醒，基金公司公布当日净值后推送iOS本地通知，同步展示估值与实际净值的偏差，适配iOS通知权限与展示样式。

- 涨跌提醒：支持自定义自选基金涨跌幅阈值，触发阈值时推送iOS本地通知，助力用户及时关注核心基金动态，可设置通知静音、振动等偏好。

## 5.4 本地设置与数据管理（P0）

- 本地使用：无需注册登录，安装后即可直接使用，规避线上账户及数据泄露风险，适配iOS应用安装与权限申请流程。

- 设置功能：支持修改工具显示偏好（适配iOS系统明暗模式）、调整估值刷新频率、管理提醒设置、清理本地缓存、版本更新及意见反馈；提供估值偏差说明入口，贴合iOS设置界面逻辑。

- 本地数据管理：支持自选列表iOS本地备份（导出为加密文件，可选择存储路径至iCloud Drive或本地文件夹）与恢复（导入文件），支持手动清理冗余数据，实现个人数据自主管控。

## 5.5 本地附加功能（P1）

- 本地数据加密：对iOS本地存储的自选列表、持仓成本等数据进行加密处理，结合iOS钥匙串存储密码，提升个人数据安全性，符合iOS隐私规范。

- iPad横屏适配：优化界面布局，支持iPad横屏显示，拓展显示区域，提升大屏使用体验，贴合iPad交互逻辑。

- 日志导出功能：支持在设置页导出运行日志与异常日志，日志文件加密存储，便于问题排查与版本优化，适配iOS本地文件管理规范。

# 六、详细设计

详细设计为总体设计的落地细化环节，明确各模块具体实现逻辑、接口定义、数据流转、iOS端页面细节及异常处理流程，为编码研发提供标准化参照依据，确保研发过程规范、无歧义，贴合iOS原生研发规范。

## 6.1 模块详细设计

### 6.1.1 自选基金管理模块

- 搜索逻辑：支持模糊搜索（基金代码/名称），优先匹配精确代码，再匹配名称关键词；本地缓存历史搜索记录，展示热门基金列表，提升搜索效率；搜索结果适配iOS弹窗样式，支持勾选批量添加。

- 分组管理：默认创建“全部自选”分组（不可删除），用户可新增、编辑、删除自定义分组；分组ID自增，关联自选基金表的group_id字段，删除分组时可选择将基金迁移至“全部自选”或同步删除，操作弹窗贴合iOS原生样式。

- 数据流转：添加/修改/删除自选操作时，同步更新Core Data中对应的自选基金表、分组表，触发update_time字段更新；置顶操作修改is_top字段，排序操作更新表中排序序号（新增sort字段，未明确标注时默认按添加时间排序），保障数据同步一致性。

### 6.1.2 估值核心模块

- 估值算法详细逻辑：基于基金最新季报重仓股（前10大）及仓位比例，结合对应股票实时行情价格，按“单只重仓股涨跌幅×仓位比例”累加计算基金预估涨跌幅，叠加基金历史仓位调整系数，QDII基金额外乘以实时外汇汇率，生成实时估值。

- 刷新机制：交易时段按用户设置频率（默认15秒）自动刷新，适配iOS后台刷新权限，严控系统资源占用；非交易时段不自动刷新，仅支持下拉手动刷新；刷新流程遵循“抓取行情数据→执行估值计算→更新Core Data与界面”的顺序，避免界面卡顿，刷新失败时触发重试机制（最多3次，每次间隔2秒）。

- 偏差控制：建立数据校验机制，对比多数据源行情数据，剔除异常值；估值偏差超过0.5%时，界面标注“当前估值偏差较大，仅供参考”，并将偏差日志存储至iOS本地，便于后续排查优化。

### 6.1.3 本地数据管理模块

- 备份与恢复：备份时将Core Data数据库文件导出为加密文件，支持选择存储路径（iCloud Drive、本地文件夹），记录备份时间并更新last_backup_time字段；恢复时校验文件完整性与格式，校验通过则覆盖现有数据库，校验失败则提示“备份文件无效”，弹窗提示贴合iOS原生样式。

- 数据加密：开启加密开关后，采用AES算法对数据库文件加密，访问密码通过MD5加密后存储至iOS钥匙串，避免密码明文存储；工具启动时，验证密码通过方可加载数据，密码错误3次则锁定工具（10分钟后解锁），锁定提示贴合iOS交互规范。

- 数据清理：缓存清理仅删除行情缓存、估值历史缓存，不影响自选列表与配置数据；删除全部自选时触发二次弹窗确认，确认后清空Core Data中自选基金表，保留分组与配置数据，规避误操作风险。

### 6.1.4 提醒模块

- 提醒触发：实时监听估值涨跌幅与净值更新事件，达到用户设置的涨跌阈值（如上涨1%、下跌1%）或净值更新时，调用iOS本地通知接口推送通知；通知内容包含基金名称、触发条件、当前估值/净值，支持点击通知跳转至对应基金详情页。

- 规则管理：提醒规则存储至Core Data提醒设置表，支持按基金、按提醒类型配置规则；修改规则时同步更新数据库，删除基金时自动删除对应提醒规则；首次设置提醒时，引导用户开启iOS通知权限，用户拒绝后可在设置页重新引导授权。

### 6.1.5 日志与异常处理模块

- 日志记录：分级记录调试日志（开发阶段）、信息日志（用户操作、数据同步）、错误日志（崩溃、数据异常），包含时间戳、操作内容、异常原因等信息，仅存储于iOS本地，不上传任何服务器。

- 异常处理：APP崩溃时，自动捕捉崩溃信息并生成错误日志，重启后弹窗提示；数据库损坏时，执行自动修复流程（修复成功率≥90%），修复失败则引导用户导入备份数据；数据同步失败时，记录失败原因并提示用户检查网络或手动刷新。

- 日志导出：支持在设置页按时间范围筛选日志，导出为加密文本文件，可分享至本地文件夹或邮箱，便于问题排查。

## 6.2 数据库详细设计

### 6.2.1 索引优化详细设计

- 自选基金表（fund_collection）：在fund_code字段建立唯一索引，避免重复添加；在group_id、is_top字段建立普通索引，提升分组查询与置顶基金查询效率，符合Core Data索引优化规范。

- 估值与净值表（fund_valuation_net_value）：在fund_code、valuation_time字段建立联合索引，提升按基金、按时间查询估值历史数据的效率；在fund_code字段建立普通索引，适配估值刷新时的批量更新需求。

- 提醒设置表（reminder_setting）：在fund_code、reminder_type字段建立联合索引，提升按基金、按提醒类型查询与触发提醒的效率，优化iOS端查询性能。

- 搜索历史表（search_history）：在search_time字段建立普通索引，提升历史记录按时间排序查询的效率，适配搜索记录展示场景。

### 6.2.2 异常数据处理

- 缺失数据：基金基础数据缺失时，界面标注“数据未同步”，触发手动同步提醒；行情数据缺失时，沿用最近一次有效数据，标注“数据加载中”，适配iOS弱网/无网场景。

- 异常数据：行情数据超出合理范围（如涨跌幅超过10%）时，剔除该异常数据，沿用前一次有效数据，并将异常日志存储至iOS本地，便于后续排查，避免错误数据展示。

- 数据冗余处理：估值与净值表按时间自动清理超过30天的历史数据，搜索历史表保留最近50条记录，清理操作可在设置页手动触发，也可设置自动清理周期（默认每周一次）。

## 6.3 页面详细设计

基于iOS原生设计规范，细化界面元素、布局比例、交互细节，适配iOS本地使用场景，兼顾美观性与便捷性，贴合移动端单手操作习惯，具体规范如下：

- 通用规范：主色调采用浅灰+低饱和蓝色，遵循红跌绿涨展示规则，字体适配iOS系统默认字体（San Francisco）；标题采用14号加粗样式、正文采用12号样式，适配移动端阅读；按钮圆角设置为8px，贴合iOS原生控件风格，输入框支持一键清空，适配iOS键盘交互规范。

- 首页细节：分组切换栏支持左右滑动，排序按钮弹出iOS原生下拉菜单（含涨跌幅升序/降序、估值高低、添加时间排序选项）；自选列表无数据时，显示居中提示与添加按钮，点击直接跳转至搜索页面，符合iOS空页面设计规范。

- 详情页细节：估值走势图支持双指缩放，分时图标注开盘、当前时间节点；重仓股明细展开后，展示股票名称、仓位比例、实时涨跌幅，点击可查看股票简要行情；导航栏支持iOS原生返回手势，贴合用户使用习惯。

- 设置页细节：开关控件采用iOS原生风格，开启状态为蓝色、关闭状态为灰色；数据管理区按“备份-恢复-清理-加密”顺序排列，优先展示核心操作；合规提示采用10号字体，居中显示，不遮挡核心按钮，贴合iOS设置页面布局规范。

- 异常页面细节：APP崩溃重启后，展示异常提示页（含“查看日志”“重新加载”按钮）；数据库损坏时，展示修复提示页，引导用户导入备份数据；无网络时，展示离线提示页，标注“当前无网络，仅展示缓存数据”，适配iOS弱网/无网场景。

## 6.4 异常处理详细设计

- 运行异常：工具出现卡顿、崩溃时，自动生成本地日志（记录异常时间、异常原因）并存储至iOS本地文件夹，重启后提示“工具异常退出，是否查看日志”；日志支持手动导出，用于问题排查，符合iOS日志存储规范。

- 数据异常：数据同步失败时，提示“数据同步失败，请检查网络或手动刷新”，弱网/无网时触发离线模式，展示缓存数据；数据库损坏时，触发自动修复流程，修复失败则提示“数据库损坏，建议导入备份数据”，弹窗提示贴合iOS原生样式。

- 操作异常：批量添加自选时，若部分基金添加失败（如代码错误），提示“部分基金添加失败，共X只，可核对代码后重新添加”；删除分组时，若分组内包含基金，提示“分组内包含X只基金，删除后基金将移至全部自选”，通过二次确认规避误操作。

- 权限异常：用户拒绝通知权限时，后续设置提醒时再次引导授权，提供“前往设置”跳转入口；拒绝本地存储权限时，无法完成备份/恢复操作，提示“请开启本地存储权限，否则无法完成数据管理操作”，贴合iOS权限管理规范。

- 加密异常：密码忘记时，支持通过“重置密码”功能清空加密设置（需二次确认），重置后数据保留但加密失效，需重新设置密码；加密文件损坏时，恢复操作失败，提示“加密文件损坏，无法完成恢复”。

# 七、非功能需求（P0必做）

## 7.1 性能需求

- 启动速度：工具冷启动时间≤3秒，热启动时间≤1秒，无卡顿、闪退问题，符合iOS应用启动优化规范。

- 刷新性能：估值数据刷新延迟≤1秒，交易时段无数据加载失败、卡顿现象，适配iOS后台刷新机制，严控系统资源占用。

- 稳定性：连续运行24小时无崩溃，自选列表与估值数据同步无丢失，估值计算无异常偏差，兼容iOS不同版本运行差异。

- 内存占用：工具运行时内存占用≤100MB，后台运行时内存占用≤20MB，避免占用过多终端资源导致卡顿。

- 安装包体积：目标安装包体积≤50MB，精简冗余资源，适配iOS应用分发规范。

## 7.2 兼容性需求

- iOS端：兼容iOS 13及以上版本，适配主流iPhone、iPad终端，兼容iOS系统更新后的运行环境，适配不同终端分辨率。

- 机型适配：优先适配iPhone 12及以上机型，兼顾iPhone SE等小屏机型与iPad大屏机型，确保界面布局无错乱、操作无遮挡。

- 系统适配：兼容iOS 13至最新正式版iOS系统，适配系统更新后的权限机制、交互规范，避免出现兼容性崩溃。

## 7.3 本地数据安全需求

- 本地存储：所有数据（含自选列表、持仓成本等）仅存储于iOS终端本地，不上传至任何线上服务器，杜绝线上数据泄露风险；支持手动备份与删除数据，符合iOS数据隐私规范。

- 数据来源：估值数据、基金数据均来自合规数据源，iOS端工具定期同步更新（支持自动/手动同步），定期校验数据准确性，标注数据更新时间与来源。

- 权限管理：仅申请iOS本地使用必要权限（通知权限、本地存储权限），不获取无关信息，首次启动时引导用户完成权限授权，符合iOS权限申请规范。

- 加密安全：AES加密密钥长度≥256位，密码存储采用MD5加密+钥匙串存储，避免明文泄露；加密数据不可被第三方工具破解，保障隐私数据安全。

- 数据销毁：用户卸载工具时，自动清理本地数据库文件与缓存文件，无数据残留，符合iOS数据销毁规范。

## 7.4 交互与体验需求

- 界面设计：采用极简布局，核心功能（自选列表、估值查询）入口突出，适配iOS系统明暗模式自动切换，贴合iOS原生设计风格。

- 操作便捷性：自选添加、提醒设置等核心操作步骤≤2步，适配移动端单手操作，贴合iOS原生交互逻辑，降低用户学习成本。

- 反馈及时性：所有用户操作（添加、删除、刷新）均需在1秒内给出反馈，加载动画时长≤3秒，避免用户等待焦虑。

- 可读性：数据展示清晰，涨跌幅、盈亏等关键信息采用颜色+字体加粗突出，适配长时间查看，降低视觉疲劳。

## 7.5 合规需求

- 隐私合规：严格遵循《个人信息保护法》《iOS应用隐私规范》，不收集、不上传任何用户数据，不获取终端无关信息（如通讯录、相册）。

- 内容合规：界面显著位置标注免责提示，明确“本工具仅提供估值参考，不构成投资建议，投资有风险”；不包含任何投资咨询、交易引导相关内容。

- 数据源合规：仅对接公募基金公司官网、证监会认可的第三方数据机构，确保基金数据、行情数据合规可追溯，不使用非法数据源。

## 7.6 运维需求

- 版本更新：支持本地安装包覆盖更新，更新时保留用户自选数据、配置信息与备份文件，更新后给出更新日志提示。

- 日志管理：日志本地存储，支持按时间筛选、手动导出，便于问题排查；日志留存时间≤30天，自动清理过期日志，减少存储占用。

- 问题反馈：设置本地意见反馈入口，用户提交的反馈内容存储至本地，支持导出反馈记录，用于版本优化。

# 八、产品原型与交互规范

## 8.1 核心页面结构（适配iOS本地部署）

1. 首页（自选列表）：顶部设置搜索栏（用于基金搜索/添加），中间为核心展示区（自选基金估值、涨跌幅、盈亏概览），支持下拉手动刷新同步最新数据，适配iOS滚动布局规范。

2. 基金详情页：顶部为估值概览区（实时估值、涨跌幅、估值走势图），中间为核心信息区（净值、估值更新时间），底部为操作区（添加到自选、设置提醒），支持iOS原生返回手势。

3. 设置与数据管理页：包含本地设置、数据备份/恢复入口、版本信息等模块，采用简洁布局，贴合iOS设置页面逻辑，适配单手操作。

4. 异常提示页：涵盖崩溃重启、数据库损坏、无网络等场景，提供对应操作入口（查看日志、重新加载、导入备份），贴合iOS原生提示样式。

5. 密码设置/重置页：用于数据加密的密码设置、修改与重置，界面简洁，包含密码输入、确认输入、忘记密码入口，适配iOS密码输入规范。

## 8.2 核心交互规范

- 手动/自动刷新：支持下拉手动刷新同步最新估值数据，可配置定时自动刷新（如每15秒、每分钟），适配iOS后台刷新权限，刷新动画采用iOS原生样式。

- 长按/滑动操作：自选列表长按弹出操作菜单（含删除、置顶、修改持仓成本选项），支持滑动删除，贴合iOS原生交互习惯。

- 跳转逻辑：点击基金名称跳转至详情页，点击提醒设置快速进入编辑界面；支持iOS原生返回手势，导航栏统一设置返回按钮，杜绝冗余跳转路径。

- 反馈提示：针对添加自选成功、数据同步成功、提醒设置完成等操作，采用iOS原生Toast提示或弹窗反馈，提示样式统一，确保用户操作感知清晰。

- 权限跳转：用户拒绝必要权限时，提供“前往设置”一键跳转入口，直接跳转至iOS系统权限设置页面，简化授权操作。

- 加密交互：密码输入错误时，实时提示“密码错误”，错误3次后锁定工具，锁定期间无法操作，解锁后可重新输入密码；密码重置时，需二次确认，避免误操作。

## 8.3 具体页面设计（适配iOS移动端）

### 8.3.1 通用设计规范

- 配色：主色调采用浅灰+低饱和蓝色（护眼适配长时间查看），辅助色采用红色（下跌）、绿色（上涨），支持iOS系统明暗模式自动切换，深色模式适配夜间使用，降低视觉疲劳，贴合iOS配色规范。

- 字体：采用iOS系统默认字体（San Francisco），标题为14号加粗样式，正文为12号常规样式，适配移动端阅读，支持动态字体大小调整，符合iOS辅助功能规范。

- 控件：按钮采用圆角设计（圆角半径8px），贴合iOS原生控件风格，无多余阴影，聚焦操作便捷性；输入框设计简洁，支持一键清空，搜索按钮与输入框联动，适配iOS键盘交互规范。

- 适配规则：适配iOS主流终端分辨率，优先适配竖屏显示，贴合单手操作；P1版本支持iPad横屏适配，优化大屏布局，贴合iPad交互逻辑。

### 8.3.2 首页（自选列表页）设计

核心定位：实现自选基金估值、涨跌幅及盈亏的快速查看，便捷完成自选基金添加/管理，作为工具默认启动页，适配iOS移动端单手操作场景。

- 顶部区域（占比15%）：左侧设置搜索框（占位提示“输入基金代码/名称搜索”），右侧设置“添加”按钮（图标+文字，支持批量添加）；搜索结果弹窗展示基金代码、名称、类型，点击可直接添加至自选，支持勾选批量添加，弹窗适配iOS原生样式。

- 中间核心区域（占比70%）：
        

    - 分组切换栏：默认展示“全部自选”，支持左右滑动切换自定义分组（如“稳健型”“指数型”），分组名称可点击编辑/删除；右侧设置“排序”按钮，弹出iOS原生下拉菜单，支持按涨跌幅、估值高低、自定义排序。

    - 自选基金列表：每行展示单只基金核心信息，包含基金代码+名称、实时估值、估值涨跌幅、昨日净值、预估盈亏、持仓收益率；涨跌幅/盈亏采用颜色标注（红跌绿涨），支持长按弹出操作菜单（删除、置顶、修改持仓成本），支持滑动删除；列表无数据时，显示“暂无自选基金，点击添加”提示，跳转至搜索添加页面，符合iOS空页面设计规范。

- 底部区域（占比15%）：左侧设置“刷新”按钮（辅助手动刷新，点击显示刷新中动画），中间展示当前时间及最新数据同步时间，右侧设置“设置”入口（图标，跳转至设置与数据管理页）；底部固定显示，不随列表滚动，便于单手快速操作。

### 8.3.3 基金详情页设计

核心定位：展示单只基金详细估值及净值信息，支持提醒设置、自选添加（未添加时），适配iOS移动端布局与交互规范。

- 顶部导航栏（占比10%）：左侧设置“返回”按钮（跳转回首页，支持iOS原生返回手势），中间展示基金代码+名称，右侧设置“更多”按钮（弹出iOS原生菜单，包含分享、估值偏差说明选项）。

- 估值概览区（占比30%）：
        

    - 核心数据：突出展示实时估值（加粗样式）、估值涨跌幅（大号字体，红跌绿涨）、预估盈亏（基于手动录入的持仓成本）、净值更新时间（标注“昨日净值”/“今日净值待更新”），排版适配移动端竖屏显示，便于单手查看。

    - 估值走势图：默认展示当日分时图（9:30-15:00），支持双指缩放，可切换至日K图（近7日）；走势图下方标注估值偏差提示（如“当前估值偏差≤0.5%，仅供参考”），适配移动端图表展示规范。

- 基础信息区（占比40%）：简洁展示基金基础信息，包含基金类型、基金公司、核心重仓股及仓位比例、QDII外汇汇率（如有），信息分行排列，避免冗余；支持点击“展开”查看完整重仓股明细，展开/收起动画贴合iOS原生风格。

- 底部操作区（占比20%）：左侧设置“设置提醒”按钮（跳转至提醒设置页，配置涨跌幅阈值、净值更新提醒），右侧设置“添加自选”/“已添加”按钮（已添加时显示“已添加”，点击可取消添加）；按钮固定显示，适配单手操作，按钮大小贴合iOS交互规范。

### 8.3.4 设置与数据管理页设计

核心定位：实现iOS本地数据管理、工具设置配置，适配本地自用的数据安全需求，贴合iOS设置页面逻辑。

- 顶部区域（占比10%）：设置标题“设置与数据管理”，支持iOS原生返回手势，导航栏采用iOS原生样式，无多余装饰，标题居中显示，适配不同机型导航栏尺寸，左侧返回按钮与首页导航栏风格统一，确保整体交互一致性。

- 核心设置区（占比50%）：按“基础设置-数据管理-安全设置-关于工具”分区排列，每个分区设置折叠/展开按钮（默认展开，点击可折叠，适配小屏机型），分区之间用浅灰色分隔线区分，贴合iOS设置页面布局逻辑。
              基础设置：包含界面主题（跟随系统/强制浅色/强制深色，默认跟随系统，适配iOS明暗模式）、字体大小（小/标准/大，默认标准，支持动态字体适配iOS辅助功能）、估值刷新频率（交易时段可选15秒/30秒/1分钟，非交易时段仅支持手动刷新，默认15秒），均采用iOS原生开关、下拉选择控件，操作反馈贴合系统规范。

- 数据管理：包含备份数据、恢复数据、清理缓存、自动清理设置四个子项，每个子项搭配对应图标，点击后弹出iOS原生操作弹窗（如备份时选择存储路径、清理缓存时二次确认）；备份/恢复操作完成后，弹出Toast提示“备份成功”“恢复成功”，失败时显示具体原因（如文件无效、权限不足）。

- 安全设置：仅展示数据加密开关（默认关闭），开启后跳转至密码设置页；搭配“密码修改”“密码重置”入口，密码设置页适配iOS密码输入规范，支持密码可见切换、强度提示（如“密码强度：中等”），密码存储贴合Keychain安全机制，不明文留存。

- 关于工具：包含版本号、更新日志、估值偏差说明、免责声明、意见反馈入口，版本号点击可查看更新记录，意见反馈支持文本输入（限制500字以内），提交后存储至本地，适配iOS文本输入交互，支持一键清空输入内容。

- 底部区域（占比40%）：上方展示本地合规提示（10号浅灰色字体，居中显示，内容与首页、详情页免责提示一致，强化合规告知）；中间设置“导出日志”“导出反馈记录”两个辅助按钮，按钮样式与页面其他操作按钮统一（圆角8px，低饱和蓝色背景）；最下方标注文档作者及更新时间，字体为10号浅灰色，不遮挡核心操作，贴合iOS设置页底部布局习惯。

- 适配细节：小屏机型（如iPhone SE）折叠分区后，核心操作入口优先展示；大屏机型（如iPad）支持横屏分栏显示（左侧分区列表，右侧操作详情），提升操作效率；开关、按钮点击区域适配iOS触控规范，点击反馈时长≤0.5秒，避免误触。

### 8.3.5 密码设置/重置页设计

核心定位：完成数据加密的密码配置与重置，兼顾安全性与操作便捷性，贴合iOS密码管理规范，避免隐私数据泄露。

- 顶部区域（占比15%）：左侧设置返回按钮（跳转回设置与数据管理页，支持iOS原生返回手势），中间展示页面标题（密码设置/密码重置，根据场景切换），导航栏风格与其他页面统一，无多余装饰。

- 输入区域（占比55%）：
                  密码设置场景：包含两次密码输入框（占位提示分别为“设置加密密码（6-12位）”“确认加密密码”），支持密码可见切换（右侧眼睛图标，点击切换明文/暗文），输入过程中实时校验密码一致性，不一致时下方显示红色提示“两次密码输入不一致，请重新输入”。

- 密码重置场景：包含原密码输入框（已开启加密时显示）、新密码输入框、确认新密码输入框，原密码输入错误时提示“原密码错误，请重新输入”，新密码需满足6-12位长度要求，不符合时显示对应提示。

- 通用规范：输入框采用iOS原生样式，边框浅灰色，聚焦时边框变为低饱和蓝色，支持一键清空（右侧叉号图标），适配iOS键盘交互，弹出键盘时页面自动上移，不遮挡输入框与底部按钮。

底部操作区（占比30%）：左侧设置“取消”按钮（浅灰色背景，白色字体），右侧设置“确认”按钮（低饱和蓝色背景，白色字体），按钮圆角8px，与页面其他控件风格统一；确认按钮默认置灰，密码输入符合要求后变为可点击状态，点击后完成密码设置/重置，跳转回设置与数据管理页并弹出Toast提示，同时更新Keychain中存储的加密密码。

### 8.3.6 异常提示页设计

核心定位：针对各类异常场景提供清晰提示与解决方案，降低用户操作困惑，贴合iOS原生提示页面风格，确保交互一致性。

- 通用布局：采用“图标-提示文本-操作按钮”的居中布局，背景为纯白色，无多余装饰，适配iOS明暗模式，深色模式下背景变为深灰色，文本变为白色，图标颜色同步适配。

- 细分场景设计：
                  崩溃重启场景：图标采用iOS原生警告样式（黄色三角+感叹号），提示文本为“工具异常退出，已生成日志供排查”，下方设置“查看日志”“重新加载”两个按钮，点击“查看日志”跳转至日志详情页（支持复制、导出），点击“重新加载”重启工具并尝试恢复数据。

- 数据库损坏场景：图标采用数据库异常样式，提示文本为“数据库损坏，已尝试自动修复，修复失败”，下方设置“导入备份”“清空数据”按钮，点击“导入备份”跳转至文件选择页面，点击“清空数据”需二次确认，清空后保留配置信息，仅删除自选与估值数据。

- 无网络场景：图标采用iOS原生无网络样式，提示文本为“当前无网络，仅展示缓存数据，无法同步最新估值”，下方设置“检查网络”按钮，点击跳转至iOS系统网络设置页面，适配弱网/无网场景的用户引导。

- 权限不足场景：针对本地存储、通知权限不足，分别展示对应提示文本与图标，下方设置“前往设置”按钮，一键跳转至iOS系统权限设置页面，引导用户开启必要权限，权限开启后自动返回工具并刷新功能。

交互细节：按钮间距适配iOS移动端规范，点击按钮后有明显反馈（轻微缩放效果），异常提示页支持iOS原生返回手势（无导航栏时，从屏幕左侧向右滑动返回上一页），确保操作流畅性。

# 九、测试需求

围绕iOS本地部署特性、功能完整性、性能稳定性、数据安全性开展全场景测试，覆盖主流iOS机型与系统版本，确保工具适配个人自用场景的核心诉求，符合前期定义的非功能需求规范，为版本上线提供保障。

## 9.1 测试范围

- 功能测试：覆盖全模块核心功能，重点测试自选基金管理、估值计算与刷新、本地数据备份/恢复、数据加密、提醒触发等P0/P1级需求，验证功能实现与详细设计一致，无功能缺失或异常。

- 性能测试：聚焦启动速度、刷新延迟、内存占用、稳定性等指标，测试不同机型（小屏/大屏）、不同系统版本下的性能表现，确保符合非功能需求中的性能规范。

- 兼容性测试：适配iOS 13至最新正式版系统，覆盖iPhone 12及以上主流机型、iPhone SE小屏机型、iPad大屏机型，测试界面布局、功能操作、交互体验的兼容性，无布局错乱或功能失效。

- 安全测试：重点测试数据加密/解密、密码管理、数据销毁、权限管控等场景，验证AES加密有效性、Keychain密码存储安全性，确保数据不泄露、不被篡改，符合隐私合规要求。

- 异常测试：模拟APP崩溃、数据库损坏、网络中断、权限拒绝、备份文件损坏等异常场景，测试异常处理逻辑的有效性，验证用户引导与问题解决流程的合理性。

- 合规测试：验证免责提示展示、数据源合规性、隐私数据处理等场景，确保符合《个人信息保护法》与iOS应用隐私规范，无违规内容或数据处理行为。

## 9.2 核心测试用例（重点场景）

### 9.2.1 功能测试用例

- 自选基金管理：测试基金搜索（精确/模糊搜索）、批量添加、滑动删除、分组管理、置顶排序等操作，验证操作后本地Core Data数据库同步更新，无数据丢失或重复添加。

- 估值核心功能：测试不同类型基金（普通公募、QDII）的估值计算准确性，验证交易时段刷新频率、非交易时段数据展示，估值偏差控制在≤0.5%，QDII基金外汇汇率叠加计算正确。

- 本地数据管理：测试备份文件导出（不同存储路径）、导入（正常/损坏文件），验证备份文件加密有效性，恢复后数据与备份时一致，数据清理操作不影响核心配置。

- 数据加密：测试密码设置、修改、重置流程，验证密码错误3次锁定功能，加密后数据库无法被第三方工具读取，密码存储无明文泄露。

- 提醒功能：测试涨跌幅阈值触发、净值更新触发的本地通知推送，验证通知内容准确性、跳转功能有效性，未开启通知权限时的引导流程正常。

### 9.2.2 性能测试用例

- 启动速度：在不同机型上测试冷启动（首次打开）、热启动（后台切换）时间，确保冷启动≤3秒、热启动≤1秒，无启动卡顿或闪退。

- 刷新性能：交易时段测试估值刷新延迟，确保≤1秒，批量添加100只基金后，刷新无卡顿，界面响应流畅，无数据加载失败。

- 稳定性测试：连续运行24小时，模拟高频刷新、频繁操作（添加/删除自选、备份/恢复），测试工具无崩溃、无数据丢失，内存占用稳定在≤100MB。

- 安装包体积：测试最终安装包体积，确保≤50MB，精简冗余资源，无不必要的文件占用。

### 9.2.3 安全与合规测试用例

- 数据安全：测试工具是否存在数据线上上传行为，卸载工具后验证本地数据库与缓存文件是否完全销毁，无数据残留。

- 权限管控：测试未开启本地存储、通知权限时，对应功能（备份/恢复、提醒）的禁用逻辑与引导流程，工具不强制获取无关权限。

- 合规验证：检查各核心页面是否标注免责提示，无投资咨询、交易引导等违规内容，数据源可追溯，符合隐私合规规范。

## 9.3 测试环境与工具

- 测试环境：覆盖iOS 13.0、iOS 15.0、iOS 17.0及最新正式版系统；测试机型包含iPhone SE（小屏）、iPhone 14（主流屏）、iPad Pro（大屏），确保测试覆盖不同终端场景。

- 测试工具：功能测试采用XCTest（iOS原生测试框架），性能测试采用Instruments（监控启动速度、内存占用、刷新延迟），安全测试采用第三方加密验证工具，兼容性测试采用真机实测+模拟器辅助验证。

## 9.4 缺陷管理

- 缺陷分级：P0（阻断性）：导致工具无法启动、数据丢失、加密失效等严重问题；P1（严重）：核心功能异常（如估值计算错误、备份失败），不影响工具启动；P2（一般）：界面布局错乱、交互不流畅等非核心问题；P3（轻微）：文本排版、提示文案等细节问题。

- 修复要求：P0级缺陷需立即修复，修复后重新测试全流程；P1级缺陷需在对应版本迭代中优先修复；P2/P3级缺陷可结合版本迭代规划，逐步优化，确保核心功能不受影响。

# 十、上线与运维规划

结合iOS本地部署特性，制定轻量化上线流程与运维方案，聚焦版本更新、问题排查、用户反馈处理，适配个人自用场景的运维需求，确保工具长期稳定可用。

## 10.1 上线规划

- 上线前提：完成全量测试，P0/P1级缺陷全部修复，性能、安全、合规指标达标；完成工具安装包打包，适配iOS应用分发规范（支持本地安装、企业签名分发，适配个人自用场景）。

- 上线流程：先完成内部测试（研发/测试人员真机验证），验证无核心问题后，进行个人自用试点使用（持续1周），收集试点反馈并优化；试点无问题后，完成最终版本打包，用于个人长期使用，无需上架App Store（适配本地部署诉求）。

- 上线检查：再次校验数据加密有效性、本地存储合规性、功能完整性，确认无数据线上上传行为，免责提示完整展示，适配目标机型与系统版本。

## 10.2 运维规划

- 版本更新：采用本地安装包覆盖更新模式，每个版本更新前备份用户本地数据，更新后保留自选列表、配置信息与备份文件；更新日志明确功能迭代、缺陷修复内容，更新后弹出提示，供用户查看。

- 问题排查：依托本地日志导出功能，用户反馈问题时，可导出加密日志用于排查；重点监控崩溃、数据丢失、估值偏差过大等核心问题，建立问题台账，优先处理高频问题。

- 数据运维：针对本地数据库，优化自动清理机制，定期清理过期日志与冗余数据，减少终端存储占用；提醒用户定期备份数据（每月1次），避免数据丢失，备份文件建议存储至安全存储路径。

- 数据源维护：定期校验合规数据源的可用性，若数据源变更，及时更新数据抓取逻辑，确保估值数据、基金数据的准确性与同步稳定性，适配数据源迭代需求。

## 10.3 风险与应对

- 风险1：iOS系统更新后出现兼容性问题（如权限机制变更、交互规范调整）；应对：系统更新后及时测试工具兼容性，快速迭代版本适配新系统，优先保障核心功能可用。

- 风险2：数据源中断或数据异常，导致估值无法同步；应对：建立多数据源备份机制，主数据源中断时自动切换至备用合规数据源，同时记录异常日志，提醒用户数据同步异常。

- 风险3：本地数据库损坏，导致数据丢失；应对：优化自动修复机制，提升修复成功率，同时强化备份提醒，引导用户定期导出备份文件，降低数据丢失风险。

- 风险4：加密机制失效，导致隐私数据泄露；应对：定期验证加密有效性，跟进iOS安全机制更新，优化AES加密与Keychain存储逻辑，确保数据安全。

# 十一、附则

## 11.1 文档说明

本文档为iOS本地部署基金实时估值工具（自用版）的PRD文档，明确产品设计、功能需求、详细实现规范及测试、运维要求，供研发、测试人员参考，作为版本研发与迭代的核心依据。

## 11.2 文档更新

后续产品迭代、需求变更时，需同步更新本文档，更新后标注更新时间、更新内容及更新人，确保文档与实际产品设计一致，便于后续维护与查阅；文档更新后需同步至研发、测试相关人员。

## 11.3 免责声明

本工具仅用于个人场景下基金实时估值查询，所有估值数据仅作为参考，不构成任何投资建议；工具严格遵循隐私合规要求，所有数据仅存储于iOS本地，用户需妥善保管备份文件，避免数据丢失；因用户操作不当、设备故障、数据源变更等导致的问题，工具研发方不承担相关责任。

# 十二、附录

## 12.1 核心字段定义

- 自选基金表（fund_collection）：fund_id（自增主键）、fund_code（基金代码，唯一索引）、fund_name（基金名称）、group_id（分组ID）、is_top（是否置顶）、sort（排序序号）、position_cost（持仓成本）、create_time（添加时间）、update_time（更新时间）。

- 估值与净值表（fund_valuation_net_value）：valuation_id（自增主键）、fund_code（基金代码，索引）、real_time_valuation（实时估值）、valuation_change（估值涨跌幅）、net_value（昨日净值）、valuation_time（估值更新时间）、deviation（估值偏差）、exchange_rate（外汇汇率，QDII专用）。

- 提醒设置表（reminder_setting）：reminder_id（自增主键）、fund_code（基金代码，索引）、reminder_type（提醒类型，涨跌幅/净值更新）、threshold（涨跌阈值）、is_enable（是否开启）、create_time（创建时间）、update_time（更新时间）。

- 用户配置表（user_config）：config_id（自增主键）、theme（主题设置）、font_size（字体大小）、refresh_frequency（刷新频率）、is_encrypted（是否加密）、last_backup_time（最后备份时间）。

## 12.2 合规数据源清单

- 核心数据源：公募基金公司官网（同步基金基础信息、净值数据）、证监会认可的第三方数据机构（同步实时行情、重仓股数据），确保数据合规可追溯。

- 备用数据源：国内正规财经数据平台（适配主数据源中断时的应急同步，确保估值数据连续性），均经过合规校验，不使用非法数据源。

## 12.3 常用工具与框架说明

- 开发框架：SwiftUI（界面开发）、Core Data（本地存储）、Keychain Services（密码存储）。

- 辅助工具：Charts（图表展示）、CocoaLumberjack（日志处理）、URLSession（网络请求）、AES加密工具（数据加密）。

- 测试工具：XCTest（功能测试）、Instruments（性能测试）、第三方加密验证工具（安全测试）。
              XCTest：iOS原生功能测试框架，适配Swift+SwiftUI研发架构，用于编写单元测试与UI自动化测试用例。单元测试聚焦核心函数校验，如估值算法准确性、数据库读写稳定性、加密解密逻辑正确性；UI自动化测试覆盖关键操作流程，如自选基金添加/删除、备份/恢复操作、提醒设置与触发等，支持真机与模拟器同步执行，可集成到CI/CD流程，确保每轮研发迭代后核心功能无回归问题。

- Instruments：苹果官方性能分析工具，用于全面监控工具运行状态。针对启动速度，可追踪冷启动/热启动过程中的进程耗时，定位代码冗余导致的启动延迟；针对内存占用，实时监测内存泄漏、峰值占用情况，规避长时间运行内存溢出问题；针对刷新性能，记录网络请求耗时与估值计算耗时，优化数据抓取与算法执行效率，确保交易时段刷新延迟≤1秒；同时可监测CPU占用率，严控后台刷新等场景的资源消耗。

- 第三方加密验证工具：选用适配iOS平台的合规加密测试工具，核心用于验证AES加密有效性与Keychain密码存储安全性。可模拟第三方破解场景，校验加密数据库的防篡改、防泄露能力；验证密码MD5加密存储的安全性，确保无明文留存；测试数据加密/解密全流程稳定性，排查加密开关切换、密码重置等场景下的加密异常问题，贴合本地数据安全测试需求。
> （注：文档部分内容可能由 AI 生成）